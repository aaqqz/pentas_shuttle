<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/default">
<head>
    <link rel="stylesheet" th:href="@{/order/css/order.css}">
    <link rel="stylesheet" th:href="@{/card/css/main.css}">
    <!-- Swiper library S -->
    <link href="https://cdn.jsdelivr.net/npm/swiper@5.3.6/css/swiper.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/swiper@5.3.6/js/swiper.min.js"></script>
    <!-- vue-awesome-swiper -->
    <script src="https://cdn.jsdelivr.net/npm/vue-awesome-swiper"></script>
    <script type="text/javascript">Vue.use(window.VueAwesomeSwiper)</script>
    <!-- Swiper library E -->
</head>

<div layout:fragment="content" class="content">
    <div class="container">
        <h1 class="list-tit fs-14">장바구니 목록</h1>
        <div class="multi-time-sale time-sale">
            <div class="weekday">
                <div class="items">
                    <div class="container">
                        <div class="list-head">
                            <span class="check demo1" @click="allCheck()">
                                <input type="checkbox" name="sCheck" id="sCheck0">
                                <label for="sCheck0"><span class="fs-16">전체선택</span></label>
                            </span>
                        </div>

                        <div class="list-body">
                            <div class="list-price">
                                <div class="check-del">
                                    <span class="check demo1">
                                        <input type="checkbox" name="sCheck" id="sCheck1">
                                        <label for="sCheck1"><span class="blind">숨김처리</span></label>
                                    </span>
                                    <div style="display: inline-flex;align-items: center;border: 1px solid #ddd;">
                                        <button type="button" class="btn btn-close"><span class="fs-14">삭제</span></button>
                                    </div>
                                </div>

                                <div class="menu-list">
                                    <h3 class="contents fs-14">[인기메뉴]명란마요</h3>
                                    <div class="sub">Large</div>
                                    <div class="menu-fot">
                                        <div class="num">
                                            <input type='button' class="plus" @click='count("plus", "totalA")' value='+'/>

                                            <div class="num-cout fs-14" >{{totalA}}</div>

                                            <input type='button' class="miner" @click='count("minus", "totalA")'  value='-'/>
                                        </div>
                                        <span class="price-num fs-num">3,600C<span>
                                    </div>
                                </div>
                            </div>

                            <div class="list-price">
                                <div class="check-del">
                                    <span class="check demo1">
                                        <input type="checkbox" name="sCheck" id="sCheck2">
                                        <label for="sCheck2"><span class="blind">숨김처리</span></label>
                                    </span>
                                    <div style="display: inline-flex;align-items: center;border: 1px solid #ddd;">
                                        <button type="button" class="btn btn-close"><span class="fs-14">삭제</span></button>
                                    </div>
                                </div>

                                <div class="menu-list">
                                    <h3 class="contents fs-14">[인기메뉴]할라피뇨치킨</h3>
                                    <div class="sub">Large</div>
                                    <div class="menu-fot">
                                        <div class="num">
                                            <input type='button' class="plus" @click='count("plus", "totalB")' value='+'/>

                                            <div class="num-cout fs-14" >{{totalB}}</div>

                                            <input type='button' class="miner" @click='count("minus", "totalB")'  value='-'/>
                                        </div>
                                        <span class="price-num fs-num">3,600C<span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="price-con">
                            <div class="fot-price fs-16">총 가격</div>
                            <div class="fot-num fs-16">27,200C</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="com-btn">
            <button type="button" class="btn btn-com" onclick="popupOpen('slideFootPopup')"><span class="fs-14">결제하기</span></button>
        </div>
    </div>
    <div layout:fragment="slideFootPopup">
        <div id="slideFootPopup" class="popup-wrap type-select" role="dialog" aria-modal="false">
            <section class="popup slide">
                <div class="popup-head">
                    <h3 class="popup-tit">결제카드 선택</h3>
                </div>

                <div class="popup-body">
                    <div class="popup-content">
                        <!-- <div class="popup-con-head"></div> -->
                        <div class="popup-con-body">
                            <section class="card-option">
                                <div class="cardWrap">

                                    <div class="swiper-pagination"></div>
                                    <swiper ref="swiperComponent" :options="swiperOption()">
                                        <swiper-slide>
                                            <div class="cardBox pd15" style="height: 49vw;">
                                                <div class="cardName fc-white fs-14 fw-bold">1번 카드</div>
                                                <div class="fc-white fs-10 mrt5">1234-1234-1234-1234</div>
                                                <div class="flex f-btw mrt75 mrb25">
                                                    <div class="fc-white fs-14">사용 가능 금액</div>
                                                    <div class="fc-white fs-14">5,000C</div>
                                                </div>
                                                <div class="bar-white"></div>
                                            </div>
                                        </swiper-slide>
                                        <swiper-slide>
                                            <div class="cardBox pd15" style="background-color: #ff8030; height: 49vw;">
                                                <div class="cardName fc-white fs-14 fw-bold">1번 카드</div>
                                                <div class="fc-white fs-10 mrt5">1234-1234-1234-1234</div>
                                                <div class="flex f-btw mrt75 mrb25">
                                                    <div class="fc-white fs-14">사용 가능 금액</div>
                                                    <div class="fc-white fs-14">5,000C</div>
                                                </div>
                                            </div>
                                        </swiper-slide>
                                    </swiper>
                                </div>
                            </section>

                            <div class="price-con-cl" style="border-top: 0.56vw solid #1a1a1a;">
                                <div class="fot-price fs-16">총금액<span class="fot-num fs-16 mrl5">27,200C</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="popup-foot">
                    <div class="btn_wrap">
                        <button type="button" class="btn btn-exit" onclick="popupClose('slideFootPopup')"><span>닫기</span></button>
                        <button type="button" class="btn btn-succ" @click="popupOpen('popupAlert')"><span>결제하기</span></button>
                    </div>
                </div>
                <div class="popup-close">
                    <button type="button" class="btn btn-close" onclick="popupClose('slideFootPopup')"><span>닫기</span></button>
                </div>
            </section>
        </div>
    </div>

    <!-- 카드로 결제했을시 완료 팝업 -->
    <div layout:fragment="popupAlert">
        <div id="popupAlert" class="popup-wrap type-basic">
            <section class="popup demo1">
                <div class="popup-body">
                    <div class="popup-content fs-16">
                        결제가 완료되었습니다.
                    </div>
                </div>
                <div class="popup-foot">
                    <div class="btn_wrap">
                        <!-- <button type="button" class="btn btn-close-al" onclick="popupClose('slideFootPopup')"><span>닫기</span></button> -->
                        <button type="button" class="btn btn-succ-all" @click="[popupClose('popupAlert'), popupClose('slideFootPopup'), goPage('/card/main')]"><span>확인</span></button>
                    </div>
                </div>
            </section>
        </div>
    </div>

</div>


<th:block layout:fragment="script">
    <script type="text/javascript">

        var app = new Vue({
            el: "#app",
            data: {
                totalA : 1,
                totalB : 1,
                cardSeq : 0
            },
            mounted: function () {
                this.init();
            },
            methods: {
                init : function(){
                    $("#sCheck0").click(function(){
                        //만약 전체 선택 체크박스가 체크된상태일경우
                        if($("#sCheck0").prop("checked")) {
                            // 해당화면에 전체 checkbox들을 체크해준다
                            $("input[type=checkbox]").prop("checked",true);
                            // 전체선택 체크박스가 해제된 경우
                        } else {
                            //해당화면에 모든 checkbox들의 체크를해제시킨다.
                            $("input[type=checkbox]").prop("checked",false); } })

                },
                count : function (type, totalVal)  {
                    var num = 0
                    if(totalVal == "totalA"){
                        num = this.totalA;
                    }else{
                        num = this.totalB;
                    }
                    // 더하기/빼기
                    if(type === 'plus') {
                        num = parseInt(num) + 1;
                    }else if(type === 'minus')  {
                        num = parseInt(num) - 1;
                    }

                    if(num < 0 ){
                        num = 0;
                    }
                    if(totalVal == "totalA"){
                        this.totalA = num;
                    }else{
                        this.totalB = num;
                    }
                    // 결과 출력
                    // resultElement.innerText = number;
                },
                allCheck : function(){

                },

                swiperOption : function(){
                    return {
                        // 'allowTouchMove': value,
                        'pagination': {
                            'el': '.swiper-pagination',
                            'type': 'fraction',
                            // 'clickable' : true, // 페이징을 클릭하면 해당 영역으로 이동, 필요시 지정해 줘야 기능 작동
                        },
                        on: {
                            'slideChangeTransitionEnd': function () {
                                this.cardSeq = this.activeIndex;
                            }
                        },
                        effect: 'coverflow',
                        coverflowEffect: {
                            rotate: 0,
                            stretch: 0,
                            depth: 300,
                            slideShadows: false,
                        }
                    };
                }
            },
            computed: {
            }
        })
    </script>
</th:block>

</html>